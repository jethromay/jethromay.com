<div class="subscribe mt-8 mb-10">
    <div class="container mx-auto bg-gray-200 py-6 px-6 rounded">
        <p class="text-base mt-2">Subscribe to my newsletter for tech related tips, tricks and tutorials! No spam, unsubscribe anytime.</p>
        <form class="w-full mb-2">
            <label class="block hidden" for="email">Email Address</label>
            <input class="mb-3 p-2 mr-2 border-b-2 appearance-none rounded focus:bg-white focus:outline-none focus:border-blue-500" name="email" id="email" type="email" x-model="email" placeholder="Email Address">
            <button class="bg-blue-500 hover:bg-blue-400 text-white p-2 rounded" type="submit">Subscribe</button>
            <div id="message"></div>
        </form>
    </div>
</div>

<script>
    var newsletter = document.querySelector('form');

    newsletter.addEventListener("submit", function(e) {
        e.preventDefault();
        email = document.getElementById('email').value;
        submitEmail(email)
    });

    function submitEmail(email) {
        fetch('/.netlify/functions/subscribe', {
            method: 'POST',
            body: JSON.stringify({
                email: email
            })
        }).then(response => {
            console.log('Data:', JSON.stringify(response));
            messageDiv = document.getElementById('message');
            messageDiv.innerText = response;
        }).catch(error => {
            console.log(error);
        });
    }
</script>

